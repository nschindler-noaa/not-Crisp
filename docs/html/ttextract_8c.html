<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>COMPASS Source Code: ttextract.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>ttextract.c File Reference</h1>Contains code to do data extraction after a recent travel time crisp <a class="el" href="structrun.html" title="Entire run parameters.">run</a> (Not part of COMPASS). <a href="#_details">More...</a>
<p>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &quot;<a class="el" href="ttextract_8h.html">ttextract.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ttextract_8c.html#f02bc32de1295430f33d2312767e9bcf">ttextract</a> (TTRequest *req, TTResult *rslt)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">perform an extraction of a data vector from a recent crisp travel-time <a class="el" href="structrun.html" title="Entire run parameters.">run</a>.  <a href="#f02bc32de1295430f33d2312767e9bcf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="139db51692d0ec247483747cf4aaf70d"></a><!-- doxytag: member="ttextract.c::ttextract_cleanup" ref="139db51692d0ec247483747cf4aaf70d" args="(TTRequest *req)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ttextract_8c.html#139db51692d0ec247483747cf4aaf70d">ttextract_cleanup</a> (TTRequest *req)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cleanup extraction by closing data file and resetting stashed ftell <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Contains code to do data extraction after a recent travel time crisp <a class="el" href="structrun.html" title="Entire run parameters.">run</a> (Not part of COMPASS). 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f02bc32de1295430f33d2312767e9bcf"></a><!-- doxytag: member="ttextract.c::ttextract" ref="f02bc32de1295430f33d2312767e9bcf" args="(TTRequest *req, TTResult *rslt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ttextract           </td>
          <td>(</td>
          <td class="paramtype">TTRequest *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TTResult *&nbsp;</td>
          <td class="paramname"> <em>rslt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
perform an extraction of a data vector from a recent crisp travel-time <a class="el" href="structrun.html" title="Entire run parameters.">run</a>. 
<p>
The format of the datafile extracted from must be that of a "realtime.real" file. This routine takes pointers to TTRequest and TTResult structs. The request struct contains a file pointer ("fp"), which must be 0 on the first call to this routine for a given datafile, in which case the filename specified by "datfile" is opened and the file pointer placed in "fp" for use in the next call. For proper operation of the fseek optimizations, "fp" must not be modified by the user in subsequent calls on the same datafile. When finished with a datafile, function "ttextract_cleanup(req)" must be called, which will close the file.<p>
The extraction is placed in the TTResult struct. The "vec" field must already contain an allocated vector of doubles large enough in size to contain the result, and should be initialized to 0. The "len" field will be set to the length of the vector overwritten by new data. The "rls_size" will be set to the total size of the original <a class="el" href="structrelease.html" title="Release parameters.">release</a> corresponding to the requested data.<p>
This routine returns 0 on success and non-zero on error. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 4 10:53:44 2008 for COMPASS Source Code by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
