<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>COMPASS Source Code: spill.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>spill.h File Reference</h1>Definitions for spill-related functions at dams. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="crisp_8h.html">crisp.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spill_8h.html#2ef5f66582ee7d5421cd39930b80ff87">set_dam_planned_spill</a> (struct <a class="el" href="structriver__segment.html">river_segment</a> *dam)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">set the planned_spill[] item in the specified dam based on the spill schedules at that dam.  <a href="#2ef5f66582ee7d5421cd39930b80ff87"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spill_8h.html#1ae632113676265727c61a62ebc6e40e">set_planned_spill</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="structrun.html" title="Entire run parameters.">run</a> through the dam list and set all the spill from the schedules.  <a href="#1ae632113676265727c61a62ebc6e40e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spill_8h.html#8cb485437890fad65ec166722c0b5358">set_legacy_spill</a> (struct <a class="el" href="structriver__segment.html">river_segment</a> *dam)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts legacy (fish spill hours) spill schedules to the new day/night format.  <a href="#8cb485437890fad65ec166722c0b5358"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spill_8h.html#de31e47ad0ad4efcb0156d0ac80a0eaf">set_dam_flow_routing</a> (struct <a class="el" href="structriver__segment.html">river_segment</a> *dam, int day)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this routine sets the final spill and powerhouse fractions for the given dam.  <a href="#de31e47ad0ad4efcb0156d0ac80a0eaf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3df8d3b2db2224c37fe6ec3ee80888d8"></a><!-- doxytag: member="spill.h::remove_all_spill_scheds" ref="3df8d3b2db2224c37fe6ec3ee80888d8" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spill_8h.html#3df8d3b2db2224c37fe6ec3ee80888d8">remove_all_spill_scheds</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove spill scheds from all dams. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Definitions for spill-related functions at dams. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="de31e47ad0ad4efcb0156d0ac80a0eaf"></a><!-- doxytag: member="spill.h::set_dam_flow_routing" ref="de31e47ad0ad4efcb0156d0ac80a0eaf" args="(struct river_segment *dam, int day)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_dam_flow_routing           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structriver__segment.html">river_segment</a> *&nbsp;</td>
          <td class="paramname"> <em>dam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>day</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this routine sets the final spill and powerhouse fractions for the given dam. 
<p>
done on a per day basis. assumes that flow and planned spill are already in place. handles multiple powerhouses, assuming that they are already configured and scheduled properly. the algorithm for allocating phouse flow is: 1) start with lowest (best) priority powerhouse (priority 0) 2) fill to flow_min (otherwise emit warning about not enough flow) 3) spill to planned spill 4) add flow until flow_min for next phouse 5) first phouse up to hydraulic capacity 6) second phouse to hydraulic capacity 7) spill until spill cap 8) spill remaining and emit warning of exceeding spill cap 
</div>
</div><p>
<a class="anchor" name="2ef5f66582ee7d5421cd39930b80ff87"></a><!-- doxytag: member="spill.h::set_dam_planned_spill" ref="2ef5f66582ee7d5421cd39930b80ff87" args="(struct river_segment *dam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_dam_planned_spill           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structriver__segment.html">river_segment</a> *&nbsp;</td>
          <td class="paramname"> <em>seg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set the planned_spill[] item in the specified dam based on the spill schedules at that dam. 
<p>
for each day in planned_spill_days, get the value (spill fraction) from that period list item. this represents the instantaneous spill. all corresponding slices in spill[] are then set to day or night values depending on if the slice is during the day or night.<p>
note: perhaps the spill value should represent the average daily spill, instead of the instantaneous spill. if so, we will change that later to pro-rate it into the proper spill hours. 
</div>
</div><p>
<a class="anchor" name="8cb485437890fad65ec166722c0b5358"></a><!-- doxytag: member="spill.h::set_legacy_spill" ref="8cb485437890fad65ec166722c0b5358" args="(struct river_segment *dam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_legacy_spill           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structriver__segment.html">river_segment</a> *&nbsp;</td>
          <td class="paramname"> <em>seg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Converts legacy (fish spill hours) spill schedules to the new day/night format. 
<p>

</div>
</div><p>
<a class="anchor" name="1ae632113676265727c61a62ebc6e40e"></a><!-- doxytag: member="spill.h::set_planned_spill" ref="1ae632113676265727c61a62ebc6e40e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_planned_spill           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="structrun.html" title="Entire run parameters.">run</a> through the dam list and set all the spill from the schedules. 
<p>
this may be overridden at some dams in monte mode. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 4 10:53:43 2008 for COMPASS Source Code by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
